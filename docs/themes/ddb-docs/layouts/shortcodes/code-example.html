<div class="code-example">
  {{ if .Get "title" }}
  <div class="code-title">{{ .Get "title" }}</div>
  {{ end }}
  <div class="code-container">
    <button class="copy-button" onclick="copyCode(this)" aria-label="Copy code">
      <i class="far fa-copy"></i> Copy
    </button>
    {{ highlight (.Inner) (.Get "lang" | default "typescript") "linenos=table" }}
  </div>
  {{ if .Get "description" }}
  <div class="code-description">
    {{ .Get "description" | markdownify }}
  </div>
  {{ end }}
</div>

<style>
  .code-example {
    margin: 2rem 0;
  }

  .code-title {
    background: #2d2d2d;
    color: #f8f8f2;
    padding: 0.75rem 1rem;
    border-radius: 4px 4px 0 0;
    font-weight: 600;
    font-size: 0.9rem;
  }

  .code-container {
    position: relative;
  }

  .code-container .copy-button {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: rgba(255, 255, 255, 0.1);
    color: #f8f8f2;
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.85rem;
    transition: all 0.3s;
    z-index: 10;
  }

  .code-container .copy-button:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  .code-description {
    margin-top: 1rem;
    padding: 1rem;
    background: #f9f9f9;
    border-radius: 4px;
    font-size: 0.95rem;
  }
</style>

<script>
  function copyCode(button) {
    const codeBlock = button.parentElement.querySelector('code');
    const text = codeBlock.textContent;

    navigator.clipboard.writeText(text).then(() => {
      const originalText = button.innerHTML;
      button.innerHTML = '<i class="fas fa-check"></i> Copied!';
      button.style.background = 'rgba(76, 175, 80, 0.3)';

      setTimeout(() => {
        button.innerHTML = originalText;
        button.style.background = 'rgba(255, 255, 255, 0.1)';
      }, 2000);
    });
  }
</script>